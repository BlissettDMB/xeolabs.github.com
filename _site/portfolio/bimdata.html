<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>BIMData™ Online 3D BIM Viewer &#8211; xeolabs</title>
<meta name="description" content="Developed the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta name="keywords" content="xeogl, bimdata, BIM, IFC, webgl">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xeolabs.com/images/">
<meta name="twitter:title" content="BIMData™ Online 3D BIM Viewer">
<meta name="twitter:description" content="Developed the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta name="twitter:creator" content="@xeographics">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="BIMData™ Online 3D BIM Viewer">
<meta property="og:description" content="Developed the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta property="og:url" content="http://xeolabs.com/portfolio/bimdata">
<meta property="og:site_name" content="xeolabs">





<link rel="canonical" href="http://xeolabs.com/portfolio/bimdata">
<link href="http://xeolabs.com/feed.xml" type="application/atom+xml" rel="alternate" title="xeolabs Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://xeolabs.com/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://xeolabs.com/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://xeolabs.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon-32x32.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://xeolabs.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://xeolabs.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://xeolabs.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xeolabs.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://xeolabs.com/">xeolabs</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://xeolabs.com/index" >About</a></li>
		        
				<li><a href="http://xeolabs.com/articles" >Articles</a></li>
		        
				<li><a href="http://xeolabs.com/portfolio" >Portfolio</a></li>
		        
				<li><a href="http://linkedin.com/in/lindsaystanleykay" target="_blank">Resume</a></li>
		        
				<li><a href="http://xeolabs.com/index" >Contact</a></li>
		        
				<li><a href="http://xeogl.org" target="_blank">xeogl</a></li>
		        

		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-top">
    <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D software engineer / WebGL developer</i></p>
<a href="http://twitter.com/xeographics" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">BIMData™ Online 3D BIM Viewer</h1>
        <p style="font-weight:bold; font-style:italic;"><time datetime="2018-03-26T00:00:00+00:00" itemprop="datePublished">March 26, 2018</time></p>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>In 2018, I worked remotely with <strong><a href="http://www.bimdata.io/en/bim-data-en/">BIMData</a></strong> in Lyon, France, to develop the WebGL-based 3D viewer 
component of their online building information modeling (BIM) platform.
<br /><br />
We developed the viewer on <strong><a href="http://xeogl.org">xeogl</a></strong>, an open source WebGL library I created for developing 
3D model visualization applications in Web browsers without using plugins.
<br /><br />
In this article, I’ll describe how we (WIP!)
<br /><br /></p>

<p><a href="http://www.bimdata.io/en/bim-data-en/"><img src="http://xeolabs.com/images/bimdata/bimdata.png" alt="" /></a></p>

<h1 id="contents">Contents</h1>

<ul>
  <li><a href="#background">Background</a></li>
  <li><a href="#the-client">The Client</a></li>
  <li><a href="#requirements">Requirements</a></li>
  <li><a href="#solution">Solution</a>
    <ul>
      <li><a href="#architecture">Architecture</a></li>
      <li><a href="#gltf-models">glTF models</a>
        <ul>
          <li><a href="#geometry-compression-and-batching">Geometry compression and batching</a></li>
        </ul>
      </li>
      <li><a href="#annotations">Annotations</a></li>
      <li><a href="#cross-section-views">Cross-section views</a></li>
      <li><a href="#viewcube">ViewCube</a></li>
      <li><a href="#emphasis-effects">Emphasis effects</a></li>
      <li><a href="#measurement-tools">Measurement tools</a></li>
      <li><a href="#camera-navigation">Camera navigation</a></li>
      <li><a href="#bcf">BCF</a></li>
      <li><a href="#isolated-object-view">Isolated object view</a></li>
    </ul>
  </li>
</ul>

<h1 id="background">Background</h1>

<p><strong>BIM</strong> is a process involving the generation and management of digital representations of physical and functional characteristics 
of buildings, usually while constructing them.
<br /><br /> 
<strong>WebGL</strong> is (TODO) and allows BIM models to be viewed online. IFC viewers are typically written as desktop apps, which allow 
them efficiently render huge models via OpenGL/DirectX etc. The browser however (TODO) The challenge is how to engineer 
things so that work at scale within the browser. WIP!</p>

<h1 id="the-client">The Client</h1>

<p><strong><a href="http://www.bimdata.io/en/bim-data-en/">BIMData</a></strong> is a company in Lyon, France that provides a cutting-edge online 
BIM platform to manage your construction projects, including an all-in-one solution to visualize, check, edit and share 
building information. 
<br /><br /></p>

<h1 id="requirements">Requirements</h1>

<ul>
  <li>Implement a WebGL-based viewer in JavaScript, to view large 3D IFC models in Web browsers, without plugins</li>
  <li>Load IFC models from glTF</li>
  <li>Emphasise and reveal objects using ghosting, wireframing and highlighting</li>
  <li>Ability to annotate models with 3D labels</li>
  <li>Cross section views</li>
  <li>Isolated object views</li>
  <li>Measurement tools, to find areas and distances within models</li>
  <li>A camera navigation gizmo similar to AutoDesk ViewCube</li>
  <li>Orbit, first-person and walk-through navigation modes</li>
  <li>Ability to capture and share views via BCF format</li>
</ul>

<h1 id="solution">Solution</h1>

<h3 id="using-xeogl">Using xeogl</h3>

<p>I implemented the BIMData viewer as a wrapper around <strong><a href="http://xeogl.org">xeogl</a></strong>, which is an open source (MIT) 
 library I created for WebGL-based visualization.
 <br /><br />
 xeogl is also used in other commercial projects and is 
 starting to receive contributions from other developers. This means that improvements and optimizations that we 
 make to xeogl for those projects will also benefit the BIMData platform.
 <br /><br />
Being geared to engineering visualization, xeogl supports many of this project’s requirements out-of-the-box. For the more 
  application-specific requirements, I extended it with proprietary components, for things like custom camera 
  controls and interaction widgets.</p>

<h3 id="sub-contracting">Sub-contracting</h3>

<p>For this job, I sub-contracted <a href="http://www.derschmale.com/">David Lenaerts</a>, a freelance graphics programmer, to help out with 
the math for 3D gizmo interactions. This was the first time I ever subcontracted anyone, and I’d recommend David to any developer 
who needs help with their WebGL projects.</p>

<h3 id="application-architecture">Application architecture</h3>

<p>Our viewer is a facade class that wraps xeogl in a set of application-specific functions, with a plugin architecture 
 into which we can add tools and gizmos.
 <br /><br />
 <img src="http://xeolabs.com/images/bimdata/uml.png" alt="" />
<br /><br />
This plugin architecture enabled us to deploy the core functionality of the viewer as soon as it was ready, then deploy 
 various tools and gizmos incrementally, as we developed them.</p>

<h3 id="gltf-geometry-pipeline">glTF geometry pipeline</h3>

<p>We’re using <a href="https://www.khronos.org/gltf/">glTF</a> as the file format for our IFC models.  Within the viewer, we’re 
loading glTF into the 3D scene using xeogl’s <a href="http://xeogl.org/docs/classes/GLTFModel.html">GLTFModel</a> components.</p>

<h4 id="geometry-compression-and-batching">Geometry compression and batching</h4>

<p>glTF gives us options for geometry compression, such as Draco and attribute quantization. Quantization 
is where we compress floating-point geometry arrays into integers, then decompress them on the GPU, within the WebGL shader. 
This gives us smaller glTF files, plus a smaller memory footprint within the viewer. If the glTF geometry is not 
compressed, then xeogl’s GLTFModel automatically quantizes it, while also batching it into the same 
vertex buffer objects (VBOs) to optimize WebGL rendering. This enables us to render models with 200k+ objects.
<br /><br /> 
As soon as WebGL 2 becomes available in enough browsers, xeogl will begin using hardware instancing, which will give 
us the ability to render even larger models.</p>

<h3 id="user-annotations">User annotations</h3>

<p>Annotations are notes that users pin to the surface of models. Our annotations are based on xeogl’s experimental 
<a href="http://xeogl.org/docs/classes/Annotation.html">Annotation</a> components. 
<br /><br />
These are able to automatically hide themselves whenever something else occludes them in the 3D view. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/annotations.gif" alt="" /></p>

<h3 id="cross-section-views">Cross-section views</h3>

<p>Our users can create an unlimited number of cross-section planes, which they can arrange using mouse and touch input.
<br /><br />
Under the hood, our cross-section planes use xeogl’s core <a href="http://xeogl.org/docs/classes/Clip.html">Clip</a> components, 
which users can interactively arrange using our fancy repositioning gizmo. That was one of the bits 
that <a href="http://www.derschmale.com/">David Lenaerts</a> helped out with.
<br /><br />
<img src="http://xeolabs.com/images/bimdata/clipping.gif" alt="" /></p>

<h3 id="viewcube-camera-controller">ViewCube camera controller</h3>

<p>Our ViewCube is a 3D camera orientation indicator and controller, which works the same as the 
one by Autodesk Research. Ours is a 3D gizmo I implemented on xeogl, with clickable hotspots that fly the camera 
to various vantage points. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/viewCube.gif" alt="" /></p>

<h3 id="isolated-object-view">Isolated object view</h3>

<h3 id="emphasis-effects">Emphasis effects</h3>

<p>xeogl has some built-in emphasis effects, such as ghosting and wireframe, which we’re using for highlighting and 
revealing BIM objects. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/highlight.gif" alt="" />
<br /><br />
Edge emphasis and ghosting effects for X-ray view:
<br /><br />
<img src="http://xeolabs.com/images/bimdata/ghosting.gif" alt="" /></p>

<h3 id="measurement-tools">Measurement tools</h3>

<h4 id="simple-distance">Simple distance</h4>

<ul>
  <li>uses xeogl 3D surface picking (describe)</li>
  <li>xeogl.Pins</li>
  <li>custom widget with interactive HTML elements etc</li>
</ul>

<p><img src="http://xeolabs.com/images/bimdata/measureDistance.gif" alt="" /></p>

<h3 id="camera-navigation">Camera navigation</h3>

<p>WIP</p>

<h3 id="bcf">BCF</h3>

<p>The BIM Collaboration Format (BCF) is an open file format that supports workflow communication in BIM processes.
<br /><br />
Our BCF system captures the complete visual state of the viewer as a JSON BCF record, that contains all the 
relevant viewer state, such as object visibilities and emphasis appearance, camera position, cross-section planes, 
annotations, as well as PNG snapshot image of the canvas.
<br /><br />
Users can capture a BCF record of the viewer state, to indicate an issue within a model, then share that with other users, 
 who can then load that view to see what the problem is.</p>

<h1 id="conclusion">Conclusion</h1>

<p>WIP</p>

<!-- <section id="table-of-contents" class="toc"> -->
<p><!-- <header> -->
    <!-- <h3>Contents</h3> -->
  <!-- </header> -->
<!-- <div id="drawer" markdown="1"> -->
<!-- *  Auto generated table of contents -->
<!-- {:toc} -->
<!-- </div> -->
<!-- </section><!--/#table-of-contents--> –&gt;</p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D software engineer / WebGL developer</i></p>
<a href="http://twitter.com/xeographics" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

        </div>
        <p class="byline"><strong>BIMData™ Online 3D BIM Viewer</strong> was published on <time datetime="2018-03-26T00:00:00+00:00" itemprop="datePublished">March 26, 2018</time> and last modified on <time datetime="2018-19-09" itemprop="dateModified">2018-19-09</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://xeolabs.com/about" title="About xeolabs" itemprop="url">xeolabs</a></span></span>.</p>
      </footer>

        <!---->
        <!--<br><br>-->
        <!--<div id="disqus_thread"></div>-->
        <!--<script type="text/javascript">-->
            <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
            <!--var disqus_shortname = 'xeographics'; // required: replace example with your forum shortname-->

            <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
            <!--(function() {-->
                <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
            <!--})();-->
        <!--</script>-->
        <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
        <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        <!---->
    </div><!-- /.article-wrap -->
  </article>

</div><!-- /#main -->


<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://xeolabs.com/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/solidcomponents-viewer" title="SolidComponents™ Online CAD Viewer">SolidComponents™ Online CAD Viewer</a></li>
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/biodigital-human" title="The BioDigital Human™">The BioDigital Human™</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2018 xeolabs. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery-1.9.1.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery.gifplayer.js"></script>-->
<!--<link rel="stylesheet" href="http://xeolabs.com/assets/css/gifplayer.css" />-->
<!--<script src="http://xeolabs.com/assets/js/scripts.min.js"></script>-->


<!--<script>-->
    <!--$(document).ready( function(){-->
        <!--$('.gifplayer').gifplayer();-->
    <!--});-->
<!--</script>-->



</body>
</html>
